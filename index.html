<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notes</title>

<style>
    *{margin:0;padding:0;box-sizing:border-box;}

    body,html{
        width:100%;height:100%;overflow:hidden;
        font-family: "Segoe UI", "Inter", Arial, sans-serif;
        background: linear-gradient(135deg,#1e1f24,#111);
        color:white;
    }

    /* --- Tabs Bar --- */
    #tabs {
        display:flex;align-items:center;
        backdrop-filter: blur(14px);
        background: rgba(255,255,255,0.06);
        padding:10px 14px;
        border-bottom:1px solid rgba(255,255,255,0.12);
        gap:8px;
        box-shadow:0 4px 18px rgba(0,0,0,.4);
    }

    .tab {
        position:relative;
        padding:8px 30px 8px 16px;
        background:rgba(255,255,255,.07);
        border-radius:8px;
        cursor:pointer;
        transition:.25s;
        white-space:nowrap;
        font-size:15px;
        opacity:.85;
    }
    .tab:hover {opacity:1;transform:translateY(-1px);}

    .tab.active {
        background:rgba(0,140,255,.45);
        box-shadow:0 0 15px rgba(0,140,255,.55);
        opacity:1;
        font-weight:600;
    }

    /* Delete Button */
    .deleteBtn {
        position:absolute;
        right:8px;top:50%;
        transform:translateY(-50%);
        font-size:14px;
        opacity:0;
        transition:.2s;
        cursor:pointer;
    }
    .tab:hover .deleteBtn {
        opacity:.7;
    }
    .deleteBtn:hover {
        opacity:1;
        color:#ff5c5c;
    }

    /* Add Tab Button */
    #addTab {
        margin-left:auto;
        padding:8px 14px;
        background:rgba(0,200,90,.45);
        border-radius:8px;
        cursor:pointer;
        transition:.3s;
        font-weight:600;
        opacity:.85;
    }
    #addTab:hover {opacity:1;transform:translateY(-1px);}

    /* --- Editor --- */
    #editor {
        width:100%;
        height:calc(100% - 58px);
        border:none;outline:none;resize:none;
        padding:25px;
        font-size:18px;
        line-height:1.55;
        background:rgba(255,255,255,.05);
        backdrop-filter: blur(10px);
        color:white;
        transition:opacity .28s ease;
        caret-color:#00a6ff;
    }

    #editor:focus {
        box-shadow:inset 0 0 30px rgba(0,170,255,.18);
    }
</style>
</head>

<body>

<div id="tabs"></div>
<textarea id="editor" placeholder="Start typing..."></textarea>

<script>
/* ========================= LocalStorage ========================= */
let tabs = JSON.parse(localStorage.getItem("tabs")) || [{name:"Note 1", text:""}];
let active = Number(localStorage.getItem("activeTab")) || 0;

const tabBar = document.getElementById("tabs");
const editor = document.getElementById("editor");

/* ========================= Render Tabs ========================= */
function renderTabs(){
    tabBar.innerHTML="";

    tabs.forEach((t,i)=>{
        let el=document.createElement("div");
        el.className="tab" + (i==active?" active":"");
        el.textContent=t.name;

        // DELETE BUTTON
        let del=document.createElement("span");
        del.className="deleteBtn";
        del.textContent="Ã—";
        del.onclick=(e)=>{e.stopPropagation(); deleteTab(i);};
        el.appendChild(del);

        el.onclick=()=>changeTab(i);
        tabBar.appendChild(el);
    });

    let add=document.createElement("div");
    add.id="addTab"; add.textContent="+ New Note";
    add.onclick=addTab;
    tabBar.appendChild(add);
}

/* ========================= Switch Tabs Smooth ========================= */
function changeTab(i){
    saveText();
    editor.style.opacity=0;
    setTimeout(()=>{
        active=i;
        editor.value=tabs[i].text;
        localStorage.setItem("activeTab", active);
        renderTabs();
        editor.style.opacity=1;
    },200);
}

/* ========================= New Note ========================= */
function addTab(){
    saveText();
    tabs.push({name:"Note "+(tabs.length+1), text:""});
    active = tabs.length - 1;
    saveAll();
    renderTabs();
    editor.value="";
    editor.focus();
}

/* ========================= Delete Tab ========================= */
function deleteTab(i){
    if(tabs.length === 1) return alert("You must have at least one note.");

    tabs.splice(i,1);

    if(active >= tabs.length) active = tabs.length - 1;

    saveAll();
    renderTabs();
    editor.value = tabs[active].text;
}

/* ========================= Save ========================= */
function saveText(){
    tabs[active].text = editor.value;
    saveAll();
}
function saveAll(){
    localStorage.setItem("tabs", JSON.stringify(tabs));
    localStorage.setItem("activeTab", active);
}

editor.addEventListener("input", saveText);

/* ========================= Start ========================= */
renderTabs();
editor.value=tabs[active].text;
</script>

</body>
</html>
