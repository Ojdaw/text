<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Glass Smooth Notes With Fade Typing</title>

<style>
    *{margin:0;padding:0;box-sizing:border-box;}

    body,html{
        height:100%;overflow:hidden;
        background:linear-gradient(135deg,#101014,#000);
        font-family:"Inter","Segoe UI",sans-serif;
        color:white;
    }

    /*==================== TAB BAR (GLASS) ====================*/
    #tabs{
        display:flex;align-items:center;gap:10px;
        background:rgba(255,255,255,.05);
        backdrop-filter:blur(14px);
        padding:10px 14px;
        box-shadow:0 3px 18px rgba(0,0,0,.45);
        border-bottom:1px solid rgba(255,255,255,.12);
    }

    .tab{
        display:flex;align-items:center;gap:6px;
        padding:8px 14px;
        background:rgba(255,255,255,.06);
        border-radius:8px;
        cursor:pointer;
        transition:.25s;
        opacity:.85;
    }
    .tab.active{
        background:rgba(0,140,255,.45);
        box-shadow:0 0 14px rgba(0,140,255,.6);
        font-weight:600;opacity:1;
    }
    .tab:hover{opacity:1;transform:translateY(-1px);}

    .delBtn{
        background:rgba(255,70,70,.65);
        padding:2px 6px;
        border-radius:6px;
        font-size:13px;
        cursor:pointer;
        transition:.25s;
    }
    .delBtn:hover{background:rgba(255,0,0,.85);}

    #addTab{
        margin-left:auto;
        background:rgba(0,200,90,.55);
        padding:8px 13px;border-radius:8px;
        cursor:pointer;font-weight:600;
        transition:.25s;opacity:.85;
    }
    #addTab:hover{opacity:1;transform:translateY(-1px);}

    /*==================== EDITOR (GLASS) ====================*/
    #editor{
        width:100%;height:calc(100% - 60px);
        background:rgba(255,255,255,.04);
        backdrop-filter:blur(8px);
        border:none;outline:none;resize:none;
        padding:25px;font-size:18px;line-height:1.55;
        color:white;caret-color:#00a6ff;
        opacity:1;transition:opacity .3s ease; 
    }

    /* Typing fade effect */
    .fadeInput{
        animation:fadeText .28s ease;
    }
    @keyframes fadeText{
        0%{opacity:.3;}
        100%{opacity:1;}
    }
</style>
</head>

<body>

<div id="tabs"></div>
<textarea id="editor" placeholder="Start typing..."></textarea>

<script>
/*==================== STORAGE ====================*/
let tabs = JSON.parse(localStorage.getItem("tabs")) || [{name:"Note 1",text:""}];
let active = Number(localStorage.getItem("activeTab")) || 0;

const tabBar=document.getElementById("tabs");
const editor=document.getElementById("editor");

/*==================== RENDER TABS ====================*/
function renderTabs(){
    tabBar.innerHTML="";
    tabs.forEach((t,i)=>{
        let el=document.createElement("div");
        el.className="tab"+(i==active?" active":"");
        el.onclick=()=>changeTab(i);
        el.innerHTML=`${t.name} <span class="delBtn" onclick="deleteTab(${i});event.stopPropagation();">Ã—</span>`;
        tabBar.appendChild(el);
    });

    let add=document.createElement("div");
    add.id="addTab";add.textContent="+ New Note";
    add.onclick=addTab;
    tabBar.appendChild(add);
}

/*==================== SWITCH TABS + FADE ====================*/
function changeTab(i){
    saveText();
    editor.style.opacity=0;
    setTimeout(()=>{
        active=i;
        editor.value=tabs[i].text || "";
        localStorage.setItem("activeTab",active);
        renderTabs();
        editor.style.opacity=1;
    },200);
}

/*==================== NEW NOTE (STARTS EMPTY) ====================*/
function addTab(){
    saveText();
    tabs.push({name:"Note "+(tabs.length+1),text:""});
    active=tabs.length-1;
    saveAll();renderTabs();
    editor.value="";editor.focus();
}

/*==================== DELETE NOTE BUTTON ====================*/
function deleteTab(i){
    if(tabs.length===1) return alert("You must keep at least one note.");
    tabs.splice(i,1);
    if(active>=tabs.length) active=tabs.length-1;
    saveAll();renderTabs();changeTab(active);
}

/*==================== SAVE ====================*/
function saveText(){tabs[active].text=editor.value;saveAll();}
function saveAll(){
    localStorage.setItem("tabs",JSON.stringify(tabs));
    localStorage.setItem("activeTab",active);
}

/*==================== Fade Typing Animation ====================*/
editor.addEventListener("input",()=>{
    saveText();
    editor.classList.remove("fadeInput");
    void editor.offsetWidth;      // restart animation
    editor.classList.add("fadeInput");
});

/*==================== START ====================*/
renderTabs();
editor.value=tabs[active].text;
</script>

</body>
</html>
